{% extends 'base.html' %}
{% load staticfiles %}
{% block page_js %}
    <script src="{% static 'vendor/bower_components/select2/dist/js/select2.full.min.js' %}"></script>
    <script src="{% static 'vendor/bower_components/flot/jquery.flot.js' %}"></script>
    <script src="{% static 'vendor/bower_components/flot/jquery.flot.pie.js' %}"></script>
    <script src="{% static 'vendor/bower_components/flot/jquery.flot.resize.js' %}"></script>
    <script src="{% static 'vendor/bower_components/flot.curvedlines/curvedLines.js' %}"></script>
    <script src="{% static 'vendor/bower_components/flot.orderbars/js/jquery.flot.orderBars.js' %}"></script>
    <script src="{% static 'demo/js/flot-charts/curved-line.js' %}"></script>
    <script src="{% static 'demo/js/flot-charts/bar.js' %}"></script>
    <script src="{% static 'demo/js/flot-charts/dynamic.js' %}"></script>
    <script src="{% static 'demo/js/flot-charts/pie.js' %}"></script>
    <script src="{% static 'demo/js/flot-charts/chart-tooltips.js' %}"></script>

{% endblock %}
{% block page_css %}
    <link rel="stylesheet" href="{% static 'vendor/bower_components/material-design-iconic-font/dist/css/material-design-iconic-font.min.css' %}">
    <link rel="stylesheet" href="{% static 'vendor/bower_components/animate.css/animate.min.css' %}">
    <link rel="stylesheet" href="{% static 'vendor/bower_components/select2/dist/css/select2.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/app.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/my.css' %}">
    <style>
    .score{margin:.35rem 0rem 0 0;-ms-flex-item-align:start;align-self:flex-start}
    .score>span{width:180px;height:180px;background-color:rgba(255,255,255,.05);border-radius:50%;display:inline-block;;text-align:center;;vertical-align:middle;margin-right:10rem;padding-top: 70px}

    .score>span>strong{display:block;font-size:3.0rem;font-weight:600;line-height:100%;}
    .score>.small_circle{width:120px;height:120px;background-color:rgba(255,255,255,.05);border-radius:50%;display:inline-block;;text-align:center;;margin-right:5rem;padding-top: 45px}
    .score>span>small{display:block;font-size:2.0rem;font-weight:600;line-height:100%;}
    .score>span>small_title{display:block;font-size:1.0rem;font-weight:600;line-height:100%;}
    </style>
{% endblock %}
{% block content%}
<div class="row quick-stats">
    <div class="col-sm-6 col-md-3">
        <div class="quick-stats__item">
            <div class="quick-stats__info">
                <h2>Line Number</h2>
                <small>Total lines</small>
            </div>

            <div class="quick-stats__chart peity-bar" style="padding-left: 30px"><h1>{{ oss_statistic.loc }}</h1></div>
        </div>
    </div>
    <div class="col-sm-6 col-md-3">
        <div class="quick-stats__item">
            <div class="quick-stats__info">
                <h2>File Number</h2>
                <small>Total files</small>
            </div>

            <div class="quick-stats__chart peity-bar" style="padding-left: 30px"><h1>{{ oss_statistic.foc }}</h1></div>
        </div>
    </div>

    <div class="col-sm-6 col-md-3">
        <div class="quick-stats__item">
            <div class="quick-stats__info">
                <h2>Deveploper Number</h2>
                <small>Total developers</small>
            </div>

            <div class="quick-stats__chart peity-bar" style="padding-left: 30px"><h1>{{ oss_statistic.doc }}</h1></div>
        </div>
    </div>

    <div class="col-sm-6 col-md-3">
        <div class="quick-stats__item">
            <div class="quick-stats__info">
                <h2>Commit Number</h2>
                <small>Total commits</small>
            </div>

            <div class="quick-stats__chart peity-bar" style="padding-left: 30px"><h1>{{ oss_statistic.coc }}</h1></div>
        </div>
    </div>
</div>
<div class="card">
    <div class="toolbar toolbar--inner">
        <div class="toolbar__label">Health Score</div>
    </div>
    <div class="progress blue">
        <h3 class="progress-title">Score</h3>
        <div class="progress-bar" style="width:62.4%; background:#1CDDB1;">
            <div class="progress-value">63.4</div>
        </div>
    </div>
    <div class="listview listview--bordered q-a" style="float:left">
        <div class="q-a__stat hidden-sm-down" style="float:left;width: 40%;height: 100%">
            <div id="container" style="height: 100%;width: 100%;margin-top: -100px;padding-left: 30px"></div>
        </div>
        <div class="listview__content" style="float:left;width: 50%">
            <div class="table-responsive">
                <table class="table mb-3">
                    <thead class="thead-inverse">
                    <tr>
                        <th>oss name</th>
                        <th>DA</th>
                        <th>CA</th>
                        <th>At</th>
                        <th>DD</th>
                        <th>PS</th>
                        <th>DE</th>
                        <th>score</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% if oss_list %}
                        {% for per_oss_list in oss_list %}
                        <tr>
                            <td>{{ per_oss_list.oss_fullname }}</td>
                            <td>{{ per_oss_list.f1 }}</td>
                            <td>{{ per_oss_list.f2 }}</td>
                            <td>{{ per_oss_list.f3 }}</td>
                            <td>{{ per_oss_list.f4 }}</td>
                            <td>{{ per_oss_list.f5 }}</td>
                            <td>{{ per_oss_list.f6 }}</td>
                            <td style="font-size: 16pt">{{ per_oss_list.score }}</td>
                        </tr>

                        {% endfor %}
                    {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
        <input type="hidden" id="oss_name" value="{{ oss_name }}">
        <input type="hidden" id="oss_score" value="{{ oss_score }}">
        <script type="text/javascript">
            var dom = document.getElementById("container");
            var oss_name = $('#oss_name').val();
            var oss_name_arr = oss_name.split(',');
            var oss_score = $('#oss_score').val();
            var oss_score_arr = oss_score.split(',');
            var myChart = echarts.init(dom);
            var app = {};
            option = null;
            var lineStyle = {
                normal: {
                    width: 1,
                    opacity: 0.5
                }
            };
            var seri = new Array();
            for(var i =0; i<oss_name_arr.length; i++ ) {
                seri[i]={name: oss_name_arr[i],type: 'radar',lineStyle: lineStyle,data: [oss_score_arr[i].split('-')],
                    symbol: 'none',itemStyle: {normal: {color: '#bb414d'}},areaStyle: {normal: {opacity: 0.5}}};
            }
            option = {
                backgroundColor: 'rgba(128, 128, 128, 0.0)' ,
                legend: {
                    bottom: 'bottom',
                    data: oss_name_arr,
                    itemGap: 20,
                    textStyle: {
                        color: '#fff',
                        fontSize: 12
                    },
                    selectedMode: 'single',
                    orient: 'horizontal',
                    x: 'center',
                    y:'bottom',
                    padding: [30,0,0,0],
                },
                radar: {
                    indicator: [
                        {name: 'Develop Activity', max: 100},
                        {name: 'Community Activity', max: 100},
                        {name: 'Attractiveness', max: 100},
                        {name: 'Develop Duration', max: 100},
                        {name: 'Problem Solution', max: 100},
                        {name: 'Develop Efficiency', max: 100}
                    ],
                    radius: 90,
                    shape: 'circle',
                    splitNumber: 5,
                    name: {
                        textStyle: {
                            color: 'rgb(255, 255, 255)'
                        }
                    },
                    splitLine: {
                        lineStyle: {
                            color: [
                                'rgba(238, 197, 102, 0.1)', 'rgba(238, 197, 102, 0.2)',
                                'rgba(238, 197, 102, 0.4)', 'rgba(238, 197, 102, 0.6)',
                                'rgba(238, 197, 102, 0.8)', 'rgba(238, 197, 102, 1)'
                            ].reverse()
                        }
                    },
                    splitArea: {
                        show: false
                    },
                    axisLine: {
                        lineStyle: {
                            color: 'rgba(238, 197, 102, 0.5)'
                        }
                    }
                },
                series: seri
            };;
            if (option && typeof option === "object") {
                myChart.setOption(option, true);
            }
       </script>
    </div>
</div>
<div class="card">
    <div class="toolbar toolbar--inner">
        <div class="toolbar__label">Popularity</div>
    </div>
    <div class="card-body" style="padding-right: 0px">
        <div id="container_sem" style="height: 600px"></div>
        <input type="hidden" id="oss_popularity_sem" value="{{ popularity }}">
        <input type="hidden" id="oss_ncdpr_sem" value="{{ oss_statistic.core_pull_count }}">
        <input type="hidden" id="oss_ncdic_sem" value="{{ oss_statistic.core_issue_comment_count }}">
        <input type="hidden" id="oss_ncdcc_sem" value="{{ oss_statistic.core_commit_comment_count }}">
        <input type="hidden" id="oss_ncdrc_sem" value="{{ oss_statistic.core_review_comment_count }}">
        <input type="hidden" id="oss_ncdr_sem" value="{{ oss_statistic.core_review_count }}">
        <input type="hidden" id="oss_npr_sem" value="{{ pulls_count }}">
        <input type="hidden" id="oss_nprc_sem" value="{{ oss_statistic.pull_comment_count }}">
        <input type="hidden" id="oss_prrr_sem" value="{{ pulls_review }}">
        <input type="hidden" id="oss_nprrc_sem" value="{{ oss_statistic.pull_review_comment_count }}">
        <input type="hidden" id="oss_nic_sem" value="{{ oss_statistic.issue_comment_count }}">
        <input type="hidden" id="oss_ncd_sem" value="{{ oss_statistic.core_developer_count }}">
        <input type="hidden" id="oss_ncc_sem" value="{{ oss_statistic.commit_comment_count }}">
        <input type="hidden" id="oss_ni_sem" value="{{ issue_count }}">
        <input type="hidden" id="oss_nl_sem" value="{{ oss_statistic.language_count }}">
        <input type="hidden" id="oss_icr_sem" value="{{ issue_closed }}">
        <input type="hidden" id="oss_prmr_sem" value="{{ pull_merged }}">
        <input type="hidden" id="oss_nd_sem" value="{{ oss_statistic.doc }}">
    </div>
        <script type="text/javascript">
            var pop = $("#oss_popularity_sem").val();
            var ncdpr = $("#oss_ncdpr_sem").val();
            var ncdic = $("#oss_ncdic_sem").val();
            var ncdcc = $("#oss_ncdcc_sem").val();
            var ncdrc = $("#oss_ncdrc_sem").val();
            var ncdr = $("#oss_ncdr_sem").val();
            var npr = $("#oss_npr_sem").val();
            var nprc = $("#oss_nprc_sem").val();
            var prrr = $("#oss_prrr_sem").val();
            var nprrc = $("#oss_nprrc_sem").val();
            var nic = $("#oss_nic_sem").val();
            var ncd = $("#oss_ncd_sem").val();
            var ncc = $("#oss_ncc_sem").val();
            var nd = $("#oss_nd_sem").val();
            var ni = $("#oss_ni_sem").val();
            var nl = $("#oss_nl_sem").val();
            var icr = $("#oss_icr_sem").val();
            var prmr = $("#oss_prmr_sem").val();
            var chart1 = echarts.init(document.getElementById("container_sem"));
            var option = {
                tooltip: {
                    formatter: function(param) {
                        if (param.dataType === 'edge') {
                            //return param.data.category + ': ' + param.data.target;
                            return "weight:" +param.data.target;
                        }
                        //return param.data.category + ': ' + param.data.name;
                        return param.data.category;
                    }
                },
                animationDurationUpdate: 1500,
                animationEasingUpdate: 'quinticInOut',
                series: [
                    {
                        type: 'graph',
                        layout: 'none',
                        symbolSize: 50,
                        roam: true,
                        label: {
                            show: true
                        },
                        edgeSymbol: ['circle', 'arrow'],
                        edgeSymbolSize: [4, 10],
                        edgeLabel: {
                            fontSize: 20
                        },
                        data: [{
                            name: "Popularity",
                            symbolSize: [100, 100],         // 关系图节点标记的大小，可以设置成诸如 10 这样单一的数字，也可以用数组分开表示宽和高，例如 [20, 10] 表示标记宽为20，高为10。
                            itemStyle: {
                                color: '#805f00'				// 关系图节点标记的颜色
                            },
                            category: pop,      // 数据项所在类目的 index。
                            x: 1150,
                            y: 150,

                        }, {
                            name: "Core Developer\nParticipation",
                            symbolSize: [100, 50],
                            itemStyle: {
                                color: '#005c99'
                            },
                            category: "Latent variables",
                            x: 600,
                            y: 100
                        }, {
                            name: "Project\nActivity",
                            symbolSize: [100, 50],
                            itemStyle: {
                                color: '#005c99'
                            },
                            category: "Latent variables",
                            x: 600,
                            y: 450
                        }, {
                            name: "Community\nVitality",
                            symbolSize: [100, 50],
                            itemStyle: {
                                color: '#005c99'
                            },
                            category: "Latent variables",
                            x: 800,
                            y: 250
                        }, {
                            name: "Development\nEfficiency",
                            symbolSize: [100, 50],
                            itemStyle: {
                                color: '#005c99'
                            },
                            category: "Latent variables",
                            x: 1150,
                            y: 350
                        }, {
                            name: "Number of Core Developer Pull Requests",
                            symbolSize: [60, 60],
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: ncdpr,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 40
                        }, {
                            name: "Number of Core Developer Reviews",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: ncdr,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 80
                        }, {
                            name: "Number of Core Developer Issue Comments",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: ncdic,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 120
                        }, {
                            name: "Number of Core Developer Commit Comments",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: ncdcc,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 160
                        }, {
                            name: "Number of Core Developer Review Comments",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: ncdrc,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 200

                        }, {
                            name: "Number of Pull Requests",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: npr,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 300
                        }, {
                            name: "Number of Pull Request Comments",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: nprc,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 340
                        }, {
                            name: "Pull Request Review Ratio",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: prrr,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 380
                        },{
                            name: "Number of Pull Rquest Review Comments",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: nprrc,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 420
                        },{
                            name: "Number of Issue Commits",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: nic,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 460
                        },{
                            name: "Number of Core Developers",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: ncd,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 500
                        },{
                            name: "Number of Developers",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: nd,
                            symbol : 'rect',
                            symbolSize : [300,20],
                            x: 200,
                            y: 540
                        },{
                            name: "Number of Developers 1",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: nd,
                            symbol : 'rect',
                            symbolSize : [300,20],
                        },{
                            name: "Number of Issues",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: ni,
                            symbol : 'rect',
                            symbolSize : [160,40],
                            x: 700,
                            y: 350
                        },{
                            name: "Number of Languages",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: nl,
                            symbol : 'rect',
                            symbolSize : [160,40],
                            x: 900,
                            y: 350
                        },{
                            name: "Number of Commit\nComments",
                            itemStyle: {
                                color: '#bb414d'
                            },
                           category: ncc,
                            symbol : 'rect',
                            symbolSize : [130,40],
                            x: 800,
                            y: 150
                        },{
                            name: "Issue Close Ratio",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: icr,
                            symbol : 'rect',
                            symbolSize : [160,40],
                            x: 1000,
                            y: 520
                        },{
                            name: "Pull Request Merged Ratio",
                            itemStyle: {
                                color: '#bb414d'
                            },
                            category: prmr,
                            symbol : 'rect',
                            symbolSize : [180,40],
                            x: 1200,
                            y: 520
                        }],
                        links: [{
                            source: "Community\nVitality",
                            target: "Popularity",
                            symbolSize: [5, 20],
                            lineStyle: {
                                width: 5,
                            }
                        },{
                            source: "Core Developer\nParticipation",
                            target: "Project\nActivity",
                            symbolSize: [5, 20],
                            lineStyle: {
                                width: 5,
                            }
                        },{
                            source: "Core Developer\nParticipation",
                            target: "Development\nEfficiency",
                            symbolSize: [5, 20],
                            lineStyle: {
                                width: 5,
                            }
                        },
                        {
                            source: "Core Developer\nParticipation",
                            target: "Community\nVitality",
                            symbolSize: [5, 20],
                            lineStyle: {
                                width: 3,
                                type:'dotted',
                                color:"#bb414d"
                            }
                        }, {
                            source: "Core Developer\nParticipation",
                            target: "Popularity",
                            symbolSize: [5, 20],
                            lineStyle: {
                                width: 3,
                                type:'dotted',
                                color:"#bb414d"
                            }
                        },{
                            source: "Project\nActivity",
                            target: "Community\nVitality",
                            symbolSize: [5, 20],
                            lineStyle: {
                                width: 5,
                            }
                        },{
                            source: "Core Developer\nParticipation",
                            target: "Number of Core Developer Pull Requests",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.756*8,
                                color:"#1CDDB1"
                            },
                            label: {
                                show: true,
                                formatter:"0.756",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Core Developer\nParticipation",
                            target: "Number of Core Developer Reviews",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.644*8,
                                color:"rgba(28, 221, 177,0.7)"
                            },
                            label: {
                                show: true,
                                formatter:"0.644",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Core Developer\nParticipation",
                            target: "Number of Core Developer Issue Comments",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.754*8,
                                color:"#1CDDB1"
                            },
                            label: {
                                show: true,
                                formatter:"0.754",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Core Developer\nParticipation",
                            target: "Number of Core Developer Commit Comments",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.455*6,
                                color:'rgba(28, 221, 177,0.3)'
                            },
                            label: {
                                show: true,
                                formatter:"0.455",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Core Developer\nParticipation",
                            target: "Number of Core Developer Review Comments",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.821*8,
                                color:"#1CDDB1"
                            },
                            label: {
                                show: true,
                                formatter:"0.821",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Project\nActivity",
                            target: "Number of Pull Requests",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.875*8,
                                color:"#1CDDB1"
                            },
                            label: {
                                show: true,
                                formatter:"0.875",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Project\nActivity",
                            target: "Number of Pull Request Comments",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.944*10,
                                color:"#8ef1da"
                            },
                            label: {
                                show: true,
                                formatter:"0.944",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Project\nActivity",
                            target: "Pull Request Review Ratio",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.740*8,
                                color:"#1CDDB1"
                            },
                            label: {
                                show: true,
                                formatter:"0.740",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Project\nActivity",
                            target: "Number of Pull Rquest Review Comments",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.830*8,
                                color:"#1CDDB1"
                            },
                            label: {
                                show: true,
                                formatter:"0.830",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Project\nActivity",
                            target: "Number of Issue Commits",
                            symbolSize: [2, 25],
                            lineStyle: {
                                width: 0.939*10,
                                color:"#8ef1da"
                            },
                            label: {
                                show: true,
                                formatter:"0.939",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Project\nActivity",
                            target: "Number of Core Developers",
                            symbolSize: [2, 25],
                            lineStyle: {
                                width: 0.930*10,
                                color:"#8ef1da"
                            },
                            label: {
                                show: true,
                                formatter:"0.930",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Project\nActivity",
                            target: "Number of Developers",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.689*8,
                                color:"#1CDDB1"
                            },
                            label: {
                                show: true,
                                formatter:"0.689",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Community\nVitality",
                            target: "Number of Commit\nComments",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.599*8,
                                color:"rgba(28, 221, 177,0.5)"
                            },
                            label: {
                                show: true,
                                formatter:"0.599",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Community\nVitality",
                            target: "Number of Issues",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.772*8,
                                color:"#1CDDB1"
                            },
                            label: {
                                show: true,
                                formatter:"0.772",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Community\nVitality",
                            target: "Number of Languages",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.594*8,
                                color:"rgba(28, 221, 177,0.5)"
                            },
                            label: {
                                show: true,
                                formatter:"0.594",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Development\nEfficiency",
                            target: "Pull Request Merged Ratio",
                            symbolSize: [4, 20],
                            lineStyle: {
                                width: 0.671*8,
                                color:"rgba(28, 221, 177,0.7)"
                            },
                            label: {
                                show: true,
                                formatter:"0.671",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },

                        },{
                            source: "Development\nEfficiency",
                            target: "Issue Close Ratio",
                            symbolSize: [2, 20],
                            lineStyle: {
                                width: 0.658*8,
                                color:"rgba(28, 221, 177,0.7)"
                            },
                            label: {
                                show: true,
                                formatter:"0.658",
                                textStyle:{//图例文字的样式
                                    color:'#fff',
                                    fontSize:10
                                }
                            },
                        }],
                         lineStyle: {
                            opacity: 0.9,
                            width: 2,
                        }
                    }]
            }
            chart1.setOption(option)
            chart1.on('click', function (param){
                console.log('param---->', param);  // 打印出param, 可以看到里边有很多参数可以使用
            // 获取节点点击的数组序号
                var arrayIndex = param.dataIndex;
                console.log('arrayIndex---->', arrayIndex);
                console.log('name---->', param.name);
                if (param.dataType == 'node') {
                    alert("点击了节点" + param.name)            }
                else {
                    alert("点击了边" + param.value)            }        });


</script>

</div>
<div class="card">
    <div class="toolbar toolbar--inner">
        <div class="toolbar__label">{{ oss_list_count }} Repositories</div>
    </div>
    <div class="listview listview--bordered q-a">
        {% if oss_list %}
            {% for per_oss_list in oss_list %}
                <div class="listview__item q-a__item">
                    <div class="q-a__stat hidden-sm-down">
                        <span>
                            <strong>{{ per_oss_list.oss_line_count }}</strong>
                            <small>Lines</small>
                        </span>

                        <span>
                            <strong>{{ per_oss_list.oss_file_count }}</strong>
                            <small>Files</small>
                        </span>

                        <span class="hidden-md-down">
                            <strong>{{ per_oss_list.oss_developer_count }}</strong>
                            <small>Developers</small>
                        </span>
                        <span>
                            <strong>{{ per_oss_list.oss_commit_count }}</strong>
                            <small>Commits</small>
                        </span>
                    </div>
                    <div class="listview__content">
                        <a href="questions-answers-details.html" class="listview__heading">{{ per_oss_list.oss_fullname }}</a>
                        <p>{{ per_oss_list.oss_description }}</p>
                        <div class="listview__attrs">
                            <span>{{ per_oss_list.oss_main_language }}</span>
                            <span>{{ per_oss_list.oss_license }}</span>
                            <span>{{ per_oss_list.oss_create_time }} created</span>
                            <span>{{ per_oss_list.oss_lastupdate_time }} updated</span>
                            <span>{{ per_oss_list.oss_homepage }}</span>
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% endif %}
    </div>
</div>
<div class="row">
    <div class="col-lg-4">
        <div class="card">
            <div class="stats-3-block block d-flex">
                <div class="stats-3" style="padding-top: 15px;padding-left: 20px"><strong class="d-block">{{ oss_statistic.issue_count }}</strong><span class="d-block">Total Issues</span>
                </div>
                <div class="stats-3 d-flex justify-content-between text-center">
                        <div class="item"><strong class="d-block strong-sm">{{ oss_statistic.issue_close_count }}</strong><span class="d-block span-sm">closed issue</span>
                          <div class="line"></div><small>+1</small>
                        </div>
                        <div class="item"><strong class="d-block strong-sm">{{ issue_open }}</strong><span class="d-block span-sm">open issue</span>
                          <div class="line"></div><small>+1</small>
                        </div>
                      </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card">
            <div class="stats-3-block block d-flex">
                <div class="stats-3" style="padding-top: 15px;padding-left: 20px"><strong class="d-block">{{ oss_statistic.pull_count }}</strong><span class="d-block">Total pr</span>
                </div>
                <div class="stats-3 d-flex justify-content-between text-center">
                        <div class="item"><strong class="d-block strong-sm">{{ oss_statistic.pull_merged_count }}</strong><span class="d-block span-sm">merged pr</span>
                          <div class="line"></div><small>+1</small>
                        </div>
                        <div class="item"><strong class="d-block strong-sm">{{ pulls_unmerged }}</strong><span class="d-block span-sm">unmerged pr</span>
                          <div class="line"></div><small>+1</small>
                        </div>
                      </div>
            </div>
        </div>
    </div>
    <div class="col-lg-4">
        <div class="card">
            <div class="stats-3-block block d-flex">
                <div class="stats-3" style="padding-top: 15px;padding-left: 20px"><strong class="d-block">{{ popularity }}</strong><span class="d-block">Popularity</span>
                </div>
                <div class="stats-3 d-flex justify-content-between text-center">
                        <div class="item"><strong class="d-block strong-sm">{{ oss_statistic.star_count }}</strong><span class="d-block span-sm">star</span>
                          <div class="line"></div><small>+1</small>
                        </div>
                        <div class="item"><strong class="d-block strong-sm">{{  oss_statistic.fork_count}}</strong><span class="d-block span-sm">fork</span>
                          <div class="line"></div><small>+1</small>
                        </div>
                      </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-6">
        <div class="card">
            <div class="stats-3-block block d-flex">
                <div class="item" style="width: 33%;text-align: center"><strong class="d-block strong-sm">{{ oss_statistic.issue_comment_count }}</strong><span class="d-block span-sm">issue comment count</span>
                  <div class="line"></div><small>+1</small>
                </div>
                <div class="item" style="width: 33%;text-align: center"><strong class="d-block strong-sm">{{ oss_statistic.pull_comment_count }}</strong><span class="d-block span-sm">pr comment count</span>
                  <div class="line"></div><small>+1</small>
                </div>
                <div class="item" style="width: 33%;text-align: center"><strong class="d-block strong-sm">{{ oss_statistic.pull_review_comment_count }}</strong><span class="d-block span-sm">pr review comment count</span>
                  <div class="line"></div><small>+1</small>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card">
            <div class="stats-3-block block d-flex">
                    <div class="item" style="width: 33%;text-align: center"><strong class="d-block strong-sm">{{ oss_statistic.pull_review_count }}</strong><span class="d-block span-sm">pr review count</span>
                      <div class="line"></div><small>+1</small>
                    </div>
                    <div class="item" style="width: 33%;text-align: center"><strong class="d-block strong-sm">{{ oss_statistic.issue_close_time }}</strong><span class="d-block span-sm">issue close time</span>
                      <div class="line"></div><small>+1</small>
                    </div>
                    <div class="item" style="width: 33%;text-align: center"><strong class="d-block strong-sm">{{ oss_statistic.pull_merged_time }}</strong><span class="d-block span-sm">pull merged time</span>
                      <div class="line"></div><small>+1</small>
                    </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-6">
        <div class="card widget-pie">
            <div class="col-6 col-sm-4 col-md-6 col-lg-4 widget-pie__item">
                <div class="easy-pie-chart" data-percent="{{ issue_closed }}" data-size="80" data-track-color="rgba(0,0,0,0.5)" data-bar-color="#fff">
                    <span class="easy-pie-chart__value">{{ issue_closed }}</span>
                </div>
                <div class="widget-pie__title">Issues<br> closed</div>
            </div>

            <div class="col-6 col-sm-4 col-md-6 col-lg-4 widget-pie__item">
                <div class="easy-pie-chart" data-percent="{{ pull_merged }}" data-size="80" data-track-color="rgba(0,0,0,0.35)" data-bar-color="#fff">
                    <span class="easy-pie-chart__value">{{ pull_merged }}</span>
                </div>
                <div class="widget-pie__title">Pulls<br> Merged</div>
            </div>

            <div class="col-6 col-sm-4 col-md-6 col-lg-4 widget-pie__item">
                <div class="easy-pie-chart" data-percent="{{ developer_core }}" data-size="80" data-track-color="rgba(0,0,0,0.35)" data-bar-color="#fff">
                    <span class="easy-pie-chart__value">{{ developer_core }}</span>
                </div>
                <div class="widget-pie__title">Core<br> Developers</div>
            </div>

            <div class="col-6 col-sm-4 col-md-6 col-lg-4 widget-pie__item">
                <div class="easy-pie-chart" data-percent="{{ core_issue }}" data-size="80" data-track-color="rgba(0,0,0,0.35)" data-bar-color="#fff">
                    <span class="easy-pie-chart__value">{{ core_issue }}</span>
                </div>
                <div class="widget-pie__title">Issues of<br>Core Developers</div>
            </div>

            <div class="col-6 col-sm-4 col-md-6 col-lg-4 widget-pie__item">
                <div class="easy-pie-chart" data-percent="{{ core_pull }}" data-size="80" data-track-color="rgba(0,0,0,0.35)" data-bar-color="#fff">
                    <span class="easy-pie-chart__value">{{ core_pull }}</span>
                </div>
                <div class="widget-pie__title">Pulls of<br>Core Developers</div>
            </div>

            <div class="col-6 col-sm-4 col-md-6 col-lg-4 widget-pie__item">
                <div class="easy-pie-chart" data-percent="{{ active_day }}" data-size="80" data-track-color="rgba(0,0,0,0.35)" data-bar-color="#fff">
                    <span class="easy-pie-chart__value">{{ active_day }}</span>
                </div>
                <div class="widget-pie__title">Active<br> days</div>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">Language</h4>
                <input type="hidden"  id="bar_lanuage_data" value="{{ bar_lanuage_data }}">
                <input type="hidden"  id="bar_lanuage_arr" value="{{ bar_lanuage_arr }}">
                <div id="main" class="flot-chart flot-bar"></div>
                <div class="flot-chart-legends flot-chart-legends--bar"></div>
            </div>
        </div>
    </div>
</div>
<div class="card">
    <div class="toolbar toolbar--inner">
            <div class="toolbar__label">Tag</div>
    </div>
    <div class="card-body">
        <div class="todo__labels">
            {% if tag %}
            {% for per_tag in tag %}
                 <a href="">#{{ per_tag.topic }}</a>
            {% endfor %}
            {% endif %}
        </div>
    </div>
</div>
<div class="card">
    <div class="toolbar toolbar--inner">
            <div class="toolbar__label">Sentiment</div>
    </div>
    <div class="card-body">
            <div id="container_sentiment" style="height: 500px;margin-left: -100px;margin-right:-100px;margin-top: -20px"></div>
            <input type="hidden"  id="sentiment_date" value="{{ sentiment_date }}">
            <input type="hidden"  id="sentiment_pos" value="{{ sentiment_pos }}">
            <input type="hidden"  id="sentiment_neg" value="{{ sentiment_neg }}">
            <input type="hidden"  id="sentiment_neu" value="{{ sentiment_neu }}">
            <input type="hidden"  id="sentiment_agv" value="{{ sentiment_agv }}">
            <script type="text/javascript">
                var dom = document.getElementById("container_sentiment");
                var myChart = echarts.init(dom);
                var date = $('#sentiment_date').val().split(',');
                var data_pos = $('#sentiment_pos').val().split(',');
                var data_neg = $('#sentiment_neg').val().split(',');
                var data_neu = $('#sentiment_neu').val().split(',');
                var data_agv = $('#sentiment_agv').val().split(',');
                var app = {};
                option = null;
                option = {
                    tooltip: {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross',
                            crossStyle: {
                                color: '#fff'
                            }
                        }
                    },

                    legend: {
                        data:['positive','negative','neutrality'],
                        textStyle:{//图例文字的样式
                            color:'#fff',
                            fontSize:16
                        }
                    },
                    xAxis: [
                        {
                            type: 'category',
                            data: date,
                            axisPointer: {
                                type: 'shadow'
                            },
                            axisLabel: {
                                show: true,
                                textStyle: {
                                    color: '#fff',
                                    fontSize:'12'
                                }
                            },
                            axisLine:{
                                lineStyle:{
                                    color:'rgba(255,255,255,0.1)',
                                    width:1,//这里是为了突出显示加上的		                        }
                                }
                            },
                            splitLine:{
                                show:true,
                                lineStyle:{
                                    color:'rgba(255,255,255,0.1)',
                                }
                            }
                        }
                    ],
                    yAxis: [
                        {
                            type: 'value',
                            name: 'issue comment number',
                            min: 0,
                            boundaryGap: [0, '10%'],
                            axisLabel: {
                                show: true,
                                textStyle: {
                                    color: '#fff',
                                    fontSize:'12'
                            }},
                            nameTextStyle:{//图例文字的样式
                                color:'#fff',
                                fontSize:12
                            },
                            axisLine:{
                                lineStyle:{
                                    color:'rgba(255,255,255,0.1)',
                                    width:1,//这里是为了突出显示加上的		                        }
                                }
                            },
                            splitLine:{
                                show:true,
                                lineStyle:{
                                    color:'rgba(255,255,255,0.1)',
                                }
                            }
                        },
                        {
                            type: 'value',
                            name: 'Emotion degree',
                            min: -1,
                            interval: 1,
                            axisLabel: {
                                show: true,
                                textStyle: {
                                    color: '#fff',
                                    fontSize:'12'
                            }},
                            nameTextStyle:{//图例文字的样式
                                color:'#fff',
                                fontSize:12
                            },
                            axisLine:{
                                lineStyle:{
                                    color:'rgba(255,255,255,0.1)',
                                    width:1,//这里是为了突出显示加上的		                        }
                                }
                            },
                            splitLine:{
                                show:true,
                                lineStyle:{
                                    color:'rgba(255,255,255,0.1)',
                                }
                            },

                        }
                    ],
                    dataZoom: [{
                    type: 'inside',
                    start: 0,
                    end: 100
                    }, {
                    start: 0,
                    end: 100,
                    handleIcon: 'M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',
                    handleSize: '80%',
                    handleStyle: {
                        color: '#fff',
                        shadowBlur: 3,
                        shadowColor: 'rgba(0, 0, 0, 0.6)',
                        shadowOffsetX: 2,
                        shadowOffsetY: 2
                    },
                    textStyle:{
                        color:'#fff',
                    },
                    }],
                    series: [
                        {
                            name:'positive',
                            type:'bar',
                            data:data_pos,
                            itemStyle:{ normal:{ color:'#1CDDB1' } },
                        },
                        {
                            name:'negative',
                            type:'bar',
                            data:data_neg,
                            itemStyle:{ normal:{ color:'#bb414d' } },
                        },
                        {
                            name:'neutrality',
                            type:'bar',
                            data:data_neu,
                            itemStyle:{ normal:{ color:'#ffffff' } },
                        },
                        {
                            name:'Emotion degree',
                            type:'line',
                            yAxisIndex: 1,
                            data:data_agv,
                            itemStyle:{ normal:{ color:'#ffbf00' } },
                            markArea:{
                                data:[[
                                    {
                                        yAxis: 0,
                                        name:'positive area',
                                        itemStyle:{ //控制当前区域样式
                                           color:'rgba(28, 221, 177,0.3)'
                                       }
                                    },{
                                        yAxis:1
                                    }
                                ],
                                [
                                    {
                                        yAxis:-1
                                    },
                                    {
                                        yAxis: 0,
                                        name:'negative area',
                                        itemStyle:{ //控制当前区域样式
                                           color:'rgba(187, 65, 77,0.3)'
                                       }

                                    }
                                ]]
                            },
                            markLine: {
                                data: [
                                    {
                                        yAxis: 0,
                                        name:'neutrality',
                                        itemStyle: {
                                            normal: {
                                                color: '#ff3300',
                                                width: 3,
                                            }
                                        }
                                    },
                                ]
                            },
                        }
                    ]
                };
                ;
                if (option && typeof option === "object") {
                    myChart.setOption(option, true);
                }
            </script>
        </div>
</div>

{% endblock %}